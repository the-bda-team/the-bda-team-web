{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://the-bda.team/_schemas/publications.json",
  "type": "array",
  "items": {
    "$ref": "#/$defs/Publication"
  },
  "$defs": {
    "Publication": {
      "type": "object",
      "required": ["id", "category", "title", "month", "year"],
      "properties": {
        "id": { "type": "string", "pattern": "^[a-z][a-z-]*[a-z]:[12][0-9]{3}[a-z]?$" },
        "category": { "type": "string", "enum": [ "Article", "InCollection", "InProceedings", "PhDThesis", "Proceedings" ] },
        "address": { "type": "string" },
        "annote": { "type": "string" },
        "appurl": { "type": "string", "format": "uri" },
        "awardurl": { "type": "string", "format": "uri" },
        "codeurl": { "type": "string", "format": "uri" },
        "doi": { "$ref": "_schemas/base.json#/$defs/DOI" },
        "isbn": { "type": "string", "oneOf": [ { "pattern": "^(\\d-?){9}-[\\dX]$" }, { "pattern": "^(97[89])-(\\d-?){10}$" } ] },
        "issn": { "type": "string", "format": "^\\d{4}-\\d{3}[\\dX]$" },
        "keywords": { "type": "array", "items": { "type": "string" } },
        "month": { "$ref": "_schemas/base.json#/$defs/Month" },
        "numpages": { "type": "integer", "minimum": 1 },
        "pages": { "type": "string", "pattern": "^[1-9][0-9]*--[1-9][0-9]*$" },
        "posterurl": { "type": "string", "format": "uri" },
        "preprinturl": { "type": "string", "format": "uri" },
        "slidesurl": { "type": "string", "format": "uri" },
        "title": { "type": "string" },
        "todo": { "type": "string" },
        "url": { "type": "string", "format": "uri" },
        "versions": { "type": "array", "items": { "type": "object", "required": ["name", "url"], "properties": { "name": { "type": "string" }, "url": { "type": "string", "format": "uri" } } } },
        "videourl": { "type": "string", "format": "uri" },
        "year": { "$ref": "_schemas/base.json#/$defs/Year" }
      },
      "allOf": [
        {
          "if": { "properties": { "category": { "const": "Article" } } },
          "then": {
            "required": [ "author", "journal" ],
            "properties": {
              "author": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "editor": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "journal": { "type": "string" },
              "number": { "type": "integer", "minimum": 1 },
              "publisher": { "type": "string" },
              "volume": { "type": "string" }
            }
          }
        },
        {
          "if": { "properties": { "category": { "const": "InCollection" } } },
          "then": {
            "required": [ "author", "booktitle" ],
            "properties": {
              "author": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "booktitle": { "type": "string" },
              "chapter": { "type": "string" },
              "edition": { "type": "string" },
              "editor": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "number": { "type": "integer", "minimum": 1 },
              "organization": { "type": "string" },
              "publisher": { "type": "string" },
              "series": { "type": "string" },
              "site": { "type": "string" },
              "volume": { "type": "string" }
            }
          }
        },
        {
          "if": { "properties": { "category": { "const": "InProceedings" } } },
          "then": {
            "required": [ "author", "booktitle" ],
            "properties": {
              "author": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "booktitle": { "type": "string" },
              "editor": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "number": { "type": "integer", "minimum": 1 },
              "organization": { "type": "string" },
              "publisher": { "type": "string" },
              "series": { "type": "string" },
              "site": { "type": "string" },
              "volume": { "type": "string" }
            }
          }
        },
        {
          "if": { "properties": { "category": { "const": "PhDThesis" } } },
          "then": {
            "required": [ "author", "school" ],
            "properties": {
              "author": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "school": { "type": "string" }
            }
          }
        },
        {
          "if": { "properties": { "category": { "const": "Proceedings" } } },
          "then": {
            "required": [ "editor" ],
            "properties": {
              "editor": { "type": "array", "items": { "$ref": "_schemas/base.json#/$defs/PersonName" }, "minItems": 1 },
              "number": { "type": "integer", "minimum": 1 },
              "organization": { "type": "string" },
              "publisher": { "type": "string" },
              "series": { "type": "string" },
              "site": { "type": "string" },
              "volume": { "type": "string" }
            }
          }
        }
      ],
      "unevaluatedProperties": false
    }
  }
}
